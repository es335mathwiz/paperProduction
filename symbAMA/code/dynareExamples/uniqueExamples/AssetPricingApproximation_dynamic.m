function [residual, g1, g2, g3] = AssetPricingApproximation_dynamic(y, x, params, steady_state, it_)
%
% Status : Computes dynamic model for Dynare
%
% Warning : this file is generated automatically by Dynare
%           from model file (.mod)

%
% Model equations
%

residual = zeros(5, 1);
T11 = params(1)^params(2);
T22 = (1+y(9))*exp(y(7))/y(4);
T26 = exp((-params(2))/params(3)*y(7)+(params(2)-1)*log(T22));
T27 = T11*T26;
T61 = T26*((-params(2))/params(3)+params(2)-1);
T64 = exp(y(7))*(1+y(9))*T11*T61;
T65 = exp(y(7))*(1+y(9))*T27+T64;
T73 = (-((1+y(9))*exp(y(7))))/(y(4)*y(4));
T75 = (params(2)-1)*T73/T22;
T77 = T11*T26*T75;
T84 = exp(y(7))/y(4);
T86 = (params(2)-1)*T84/T22;
T88 = T11*T26*T86;
T128 = T11*(T75*T26*T75+T26*(params(2)-1)*(T22*(-((-((1+y(9))*exp(y(7))))*(y(4)+y(4))))/(y(4)*y(4)*y(4)*y(4))-T73*T73)/(T22*T22));
T150 = T11*(T26*T75*T86+T26*(params(2)-1)*(T22*(-exp(y(7)))/(y(4)*y(4))-T73*T84)/(T22*T22));
T162 = T11*(T86*T26*T86+T26*(params(2)-1)*(-(T84*T84))/(T22*T22));
lhs =y(4);
rhs =exp(y(7))*(1+y(9))*T27;
residual(1)= lhs-rhs;
lhs =y(5);
rhs =T27*(1+y(10))*exp(y(8));
residual(2)= lhs-rhs;
lhs =y(2);
rhs =params(4)+y(1)+x(it_, 1);
residual(3)= lhs-rhs;
lhs =y(3);
rhs =params(5)+y(1)*params(7)+x(it_, 3);
residual(4)= lhs-rhs;
lhs =y(6);
rhs =y(1)*params(6)+x(it_, 2);
residual(5)= lhs-rhs;
if nargout >= 2,
  g1 = zeros(5, 13);

%
% Jacobian matrix
%

g1(1,7)=(-T65);
g1(1,4)=1-exp(y(7))*(1+y(9))*T77;
g1(1,9)=(-(exp(y(7))*(T27+(1+y(9))*T88)));
g1(2,7)=(-(exp(y(8))*(1+y(10))*T11*T61));
g1(2,8)=(-(T27*(1+y(10))*exp(y(8))));
g1(2,4)=(-(exp(y(8))*(1+y(10))*T77));
g1(2,9)=(-(exp(y(8))*(1+y(10))*T88));
g1(2,5)=1;
g1(2,10)=(-(T27*exp(y(8))));
g1(3,2)=1;
g1(3,1)=(-1);
g1(3,11)=(-1);
g1(4,3)=1;
g1(4,1)=(-params(7));
g1(4,13)=(-1);
g1(5,1)=(-params(6));
g1(5,6)=1;
g1(5,12)=(-1);
end
if nargout >= 3,
%
% Hessian matrix
%

  v2 = zeros(33,3);
v2(1,1)=1;
v2(1,2)=85;
v2(1,3)=(-(T65+T64+exp(y(7))*(1+y(9))*T11*((-params(2))/params(3)+params(2)-1)*T61));
v2(2,1)=1;
v2(2,2)=46;
v2(2,3)=(-(exp(y(7))*(1+y(9))*T77+exp(y(7))*(1+y(9))*T11*T61*T75));
v2(3,1)=1;
v2(3,2)=82;
v2(3,3)=v2(2,3);
v2(4,1)=1;
v2(4,2)=43;
v2(4,3)=(-(exp(y(7))*(1+y(9))*T128));
v2(5,1)=1;
v2(5,2)=111;
v2(5,3)=(-(exp(y(7))*(T27+(1+y(9))*T88)+exp(y(7))*(T11*T61+(1+y(9))*T11*T61*T86)));
v2(6,1)=1;
v2(6,2)=87;
v2(6,3)=v2(5,3);
v2(7,1)=1;
v2(7,2)=108;
v2(7,3)=(-(exp(y(7))*(T77+(1+y(9))*T150)));
v2(8,1)=1;
v2(8,2)=48;
v2(8,3)=v2(7,3);
v2(9,1)=1;
v2(9,2)=113;
v2(9,3)=(-(exp(y(7))*(T88+T88+(1+y(9))*T162)));
v2(10,1)=2;
v2(10,2)=85;
v2(10,3)=(-(exp(y(8))*(1+y(10))*T11*((-params(2))/params(3)+params(2)-1)*T61));
v2(11,1)=2;
v2(11,2)=98;
v2(11,3)=(-(exp(y(8))*(1+y(10))*T11*T61));
v2(12,1)=2;
v2(12,2)=86;
v2(12,3)=v2(11,3);
v2(13,1)=2;
v2(13,2)=99;
v2(13,3)=(-(T27*(1+y(10))*exp(y(8))));
v2(14,1)=2;
v2(14,2)=46;
v2(14,3)=(-(exp(y(8))*(1+y(10))*T11*T61*T75));
v2(15,1)=2;
v2(15,2)=82;
v2(15,3)=v2(14,3);
v2(16,1)=2;
v2(16,2)=47;
v2(16,3)=(-(exp(y(8))*(1+y(10))*T77));
v2(17,1)=2;
v2(17,2)=95;
v2(17,3)=v2(16,3);
v2(18,1)=2;
v2(18,2)=43;
v2(18,3)=(-(exp(y(8))*(1+y(10))*T128));
v2(19,1)=2;
v2(19,2)=111;
v2(19,3)=(-(exp(y(8))*(1+y(10))*T11*T61*T86));
v2(20,1)=2;
v2(20,2)=87;
v2(20,3)=v2(19,3);
v2(21,1)=2;
v2(21,2)=112;
v2(21,3)=(-(exp(y(8))*(1+y(10))*T88));
v2(22,1)=2;
v2(22,2)=100;
v2(22,3)=v2(21,3);
v2(23,1)=2;
v2(23,2)=108;
v2(23,3)=(-(exp(y(8))*(1+y(10))*T150));
v2(24,1)=2;
v2(24,2)=48;
v2(24,3)=v2(23,3);
v2(25,1)=2;
v2(25,2)=113;
v2(25,3)=(-(exp(y(8))*(1+y(10))*T162));
v2(26,1)=2;
v2(26,2)=124;
v2(26,3)=(-(exp(y(8))*T11*T61));
v2(27,1)=2;
v2(27,2)=88;
v2(27,3)=v2(26,3);
v2(28,1)=2;
v2(28,2)=125;
v2(28,3)=(-(T27*exp(y(8))));
v2(29,1)=2;
v2(29,2)=101;
v2(29,3)=v2(28,3);
v2(30,1)=2;
v2(30,2)=121;
v2(30,3)=(-(exp(y(8))*T77));
v2(31,1)=2;
v2(31,2)=49;
v2(31,3)=v2(30,3);
v2(32,1)=2;
v2(32,2)=126;
v2(32,3)=(-(exp(y(8))*T88));
v2(33,1)=2;
v2(33,2)=114;
v2(33,3)=v2(32,3);
  g2 = sparse(v2(:,1),v2(:,2),v2(:,3),5,169);
end
if nargout >= 4,
%
% Third order derivatives
%

  g3 = sparse([],[],[],5,2197);
end
end
